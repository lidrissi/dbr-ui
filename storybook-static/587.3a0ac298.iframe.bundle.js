"use strict";(self.webpackChunkdbr_ui=self.webpackChunkdbr_ui||[]).push([[587,600],{"./src/components/Widget/DataGrid/DataGrid.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _Users_lidrissi_Documents_um6p_dbr_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),_Users_lidrissi_Documents_um6p_dbr_ui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),mui_datatables__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/mui-datatables/dist/index.js"),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@material-ui/core/esm/styles/createTheme.js"),_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./node_modules/@material-ui/styles/esm/ThemeProvider/ThemeProvider.js"),_services_NotificationService__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/services/NotificationService.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),DataGrid=(0,react__WEBPACK_IMPORTED_MODULE_0__.memo)((function(_ref){var subscription,widget=_ref.widget,onReceiveNotification=_ref.onReceiveNotification,_useState=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(""),_useState2=(0,_Users_lidrissi_Documents_um6p_dbr_ui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState,2),tableBodyMaxHeight=_useState2[0],_useState3=(_useState2[1],(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)("")),_useState4=(0,_Users_lidrissi_Documents_um6p_dbr_ui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState3,2),urlParams=_useState4[0],_useState5=(_useState4[1],(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([])),_useState6=(0,_Users_lidrissi_Documents_um6p_dbr_ui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState5,2),data=_useState6[0],setData=_useState6[1],_useState7=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(-1),_useState8=(0,_Users_lidrissi_Documents_um6p_dbr_ui_node_modules_babel_runtime_helpers_esm_slicedToArray_js__WEBPACK_IMPORTED_MODULE_4__.Z)(_useState7,2),expandableRowIndex=_useState8[0],setExpandableRowIndex=_useState8[1],columns=(widget.mappingResponseParams||[]).map((function(_ref2,index){var _widget$mappingParams,responseParam=_ref2.responseParam,widgetParam=_ref2.widgetParam;return{colIndex:index,name:responseParam,appParam:null===(_widget$mappingParams=widget.mappingParams.find((function(param){return widgetParam==param.widgetParam})))||void 0===_widget$mappingParams?void 0:_widget$mappingParams.appParam}}));(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((function(){var result=widget.data||[];return setData(result),subscription=_services_NotificationService__WEBPACK_IMPORTED_MODULE_2__.O.getNotification().subscribe((function(notification){handleNotification(notification)})),function(){subscription&&subscription.unsubscribe()}}),[widget.data]);var handleNotification=function handleNotification(notification){if(onReceiveNotification(notification.appParamsValue||{}),notification&&0!=widget.mappingParams.length){var commonAppParams=widget.mappingParams.filter((function(_ref3){var appParam=_ref3.appParam;return Object.keys(notification.appParamsValue).indexOf(appParam)>-1})),rowIndex=-1;(null==commonAppParams?void 0:commonAppParams.length)>0&&(rowIndex=widget.data.findIndex((function(rowData){return commonAppParams.every((function(_ref4){var appParam=_ref4.appParam,responseParam=_ref4.responseParam;return notification.appParamsValue[appParam]==rowData[responseParam]}))}))),setExpandableRowIndex(rowIndex)}},options={filter:!0,filterType:"dropdown",responsive:"vertical",tableBodyMaxHeight:tableBodyMaxHeight,fixedHeader:!0,selectableRowsHideCheckboxes:!0,onRowClick:function handleRowClick(_,_ref5){var rowIndex=_ref5.rowIndex;if(0!=widget.mappingParams.length){var rowData=data[rowIndex],appParamsValue={};widget.mappingParams.forEach((function(_ref6){var appParam=_ref6.appParam,responseParam=_ref6.responseParam;appParamsValue[appParam]=rowData[responseParam]})),Object.keys(appParamsValue).length>0&&(setExpandableRowIndex(rowIndex),function notifyAllWidgets(widgetNotification){_services_NotificationService__WEBPACK_IMPORTED_MODULE_2__.O.sendNotification(widgetNotification)}({fromWidgetKey:widget._id,appParamsValue:appParamsValue}))}}},components={ExpandButton:function ExpandButton(props){return props.dataIndex===expandableRowIndex&&urlParams?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(mui_datatables__WEBPACK_IMPORTED_MODULE_1__.Vh,(0,_Users_lidrissi_Documents_um6p_dbr_ui_node_modules_babel_runtime_helpers_esm_objectSpread2_js__WEBPACK_IMPORTED_MODULE_6__.Z)({},props)):(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{style:{width:"24px"}})}};return widget.data&&0!=widget.data.length?(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_7__.Z,{theme:function getMuiTheme(){return(0,_material_ui_core_styles__WEBPACK_IMPORTED_MODULE_5__.Z)({overrides:{MUIDataTable:{paper:{boxShadow:"none"}},MUIDataTableHeadCell:{fixedHeader:{backgroundColor:"#f1f2f4",padding:"10px"}},MUIDataTableSelectCell:{headerCell:{backgroundColor:"#f1f2f4"}},MUIDataTableBodyCell:{root:{padding:"6px",cursor:"pointer"}}}})}(),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(mui_datatables__WEBPACK_IMPORTED_MODULE_1__.ZP,{data:data,columns:columns,options:options,components:components})}):null}));__webpack_exports__.default=DataGrid},"./src/components/Widget/DataGrid/index.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.r(__webpack_exports__);var _DataGrid__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/components/Widget/DataGrid/DataGrid.jsx");__webpack_exports__.default=_DataGrid__WEBPACK_IMPORTED_MODULE_0__.default}}]);