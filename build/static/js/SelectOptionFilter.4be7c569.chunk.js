"use strict";(self.webpackChunkdbr_ui=self.webpackChunkdbr_ui||[]).push([[579],{55976:function(n,a,e){e.r(a),e.d(a,{default:function(){return g}});var r=e(4942),i=e(1413),t=e(15861),u=e(70885),o=e(87757),c=e.n(o),s=function(n){return"csv_file"===n},l=e(72791),f=e(49051),d=e(5560),p=e(72525),v=e(80184),m=(0,l.forwardRef)((function(n,a){var e,o,m,g,h,P=n.tag,b=n.onSendNotification,j={appParamsValue:{}},x=(0,l.useState)(!1),y=(0,u.Z)(x,2),S=y[0],Z=y[1],k=(0,l.useState)("ALL"),O=(0,u.Z)(k,2),N=O[0],V=O[1],L=(0,l.useState)(P.configuration.options||[]),q=(0,u.Z)(L,2),w=q[0],_=q[1],C=(0,l.useState)(!1),E=(0,u.Z)(C,2),A=E[0],J=E[1];(0,l.useImperativeHandle)(a,(function(){return{resetSelection:B}}));var K=function(){var n=(0,t.Z)(c().mark((function n(){var a,e,r,t,u,o=arguments;return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=o.length>0&&void 0!==o[0]?o[0]:{},(e=(0,i.Z)({},P.configuration.dataSource)).query||s(e.type)){n.next=4;break}return n.abrupt("return");case 4:return J(!0),e.query&&(e.query.paramsValue=a),n.next=8,(0,d.f)(e);case 8:r=n.sent,t=r,u=Object.keys(t).map((function(n){return t[n]})).filter((function(n){return null!=n})),_(u),P.configuration.options=u,J(!1);case 14:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();(0,l.useEffect)((function(){return h=p.O.getNotification().subscribe((function(n){var a,e,r,t;if(R(n.appParamsValue),(null===P||void 0===P||null===(a=P.configuration)||void 0===a||null===(e=a.dataSource)||void 0===e||null===(r=e.query)||void 0===r||null===(t=r.urlParams)||void 0===t?void 0:t.length)>0){var u=P.configuration.dataSource.query.urlParams,o=u.map((function(n){return j.appParamsValue[n]||""})),c=u.map((function(a){return n.appParamsValue[a]||""}));JSON.stringify(o)!=JSON.stringify(c)&&K(n.appParamsValue)}else J(!1),_(P.configuration.options);j=(0,i.Z)((0,i.Z)({},n),{},{appParamsValue:(0,i.Z)({},n.appParamsValue)})})),function(){h.unsubscribe()}}),[]),(0,l.useEffect)((function(){K(j),R(p.B)}),[null===(e=P.configuration)||void 0===e||null===(o=e.dataSource)||void 0===o||null===(m=o.query)||void 0===m?void 0:m._id]);var R=function(n){var a,e;0!=(null===(a=P.configuration.appParam)||void 0===a?void 0:a.length)&&0!=(null===(e=Object.keys(n))||void 0===e?void 0:e.length)&&Object.keys(n).forEach((function(a){var e=P.configuration.appParam.find((function(n){var e=n.value;return a==e}));if(e){var r=P.configuration.options.find((function(r){return r[e.label]==n[a]}));r&&V(r[P.configuration.serviceParam]||Object.values(r)[0])}}))},z=function(n){var a;if(null!==P&&void 0!==P&&null!==(a=P.configuration)&&void 0!==a&&a.appParam){var e=[];(P.configuration.appParam||[]).forEach((function(a){var r=a.label,i=a.value;e[i]=n[r]||""}));var r={appParamsValue:e,fromWidgetKey:""};p.O.sendNotification(r),b(r)}},B=function(){V("ALL")};return(0,v.jsxs)(f.Kb,{isOpen:S,toggle:function(){return Z(!S)},children:[(0,v.jsx)(f.Z_,(g={tag:"span",caret:!0,size:"xs",className:"w-100"},(0,r.Z)(g,"className","d-flex align-items-center"),(0,r.Z)(g,"children",(0,v.jsx)("span",{className:"truncate filter-value",title:N,children:N})),g)),(0,v.jsx)(f.h_,{children:!1===A?w&&w.length>0?(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(f.hP,{onClick:n.onReset,children:"ALL"}),(0,v.jsx)(f.hP,{divider:!0,className:"mt-1 mb-1"}),w.map((function(n,a){return(0,v.jsx)(f.hP,{onClick:function(){return function(n){V(n[P.configuration.serviceParam]||Object.values(n)[0]),z(n)}(n)},children:n[P.configuration.serviceParam]||Object.values(n)[0]},a)}))]}):(0,v.jsx)(f.hP,{children:"No options found"}):(0,v.jsx)(f.hP,{children:"Loading ..."})})]})})),g=m}}]);
//# sourceMappingURL=SelectOptionFilter.4be7c569.chunk.js.map