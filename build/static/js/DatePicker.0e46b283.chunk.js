(self.webpackChunkdbr_ui=self.webpackChunkdbr_ui||[]).push([[576],{22206:function(e,a,t){"use strict";t.r(a),t.d(a,{default:function(){return J}});var n=t(70885),r=t(72791),s=t(49051),o=t(97892),l=t.n(o),c=t(1413),i=t(39216),u=t.n(i);function d(e,a,t){return null!=e&&t.isBefore(e,"day")||null!=a&&t.isAfter(a,"day")}function f(e,a,t){return e&&a&&t>e&&t<a}function h(e){var a=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));a.setUTCDate(a.getUTCDate()+4-(a.getUTCDay()||7));var t=new Date(Date.UTC(a.getUTCFullYear(),0,1));return Math.ceil(((e-t)/864e5+1)/7)}var m=t(81694),v=t.n(m);l().extend(u());for(var D="DAY",p="WEEK",x=t(80184),y=l()(),b=y.startOf("week"),k=y.endOf("week"),Y=y.clone().subtract(5,"year"),g=y.clone().add(5,"year"),j=y.clone().subtract(70,"year").format("YYYY"),w=y.clone().add(70,"year").format("YYYY"),N=[],Z=b;Z<=k;)N.push(Z.format("dd")),Z=Z.add(1,"day");for(var C=parseInt(j),O=parseInt(w),M=[];C<O;C++)M.push(C);var S={locale:{weekNames:N,weekLabel:"W",yearNames:M},calendar:y,minDate:Y,maxDate:g,maxSpan:{years:5},minYear:j,maxYear:w,showWeekNumbers:!0,showISOWeekNumbers:!1,buttonClasses:"btn btn-sm",applyButtonClasses:"btn-primary",cancelButtonClasses:"btn-default"};var P=function(e){var a=e.dateRange,t=a.start,s=a.end,o=(0,r.useState)(l()(t)),i=(0,n.Z)(o,2),u=i[0],d=i[1],f=(0,r.useState)(l()(s)),h=(0,n.Z)(f,2),m=h[0],v=h[1],D=(0,r.useState)(""),p=(0,n.Z)(D,2),y=p[0],b=p[1],k=(0,r.useState)("CLOSED"),Y=(0,n.Z)(k,2),g=Y[0],j=Y[1],w=(0,c.Z)((0,c.Z)({onDayClick:function(e){var a="OPEN"===g,t=a&&e>=u?e:null,n=m||u,r=a&&e>=u?"CLOSED":"OPEN";d(a?u:e),v(t),b(n),j(r)},startDate:u,endDate:m,range:y,closedOrOpen:g},e),S),N=e.component;return(0,x.jsxs)(N,(0,c.Z)((0,c.Z)({},w),{},{children:[(0,x.jsx)("div",{className:"ranges"}),(0,x.jsxs)("div",{className:"drp-buttons",style:{width:"100%"},children:[(0,x.jsx)("span",{className:"drp-selected",children:(0,x.jsx)("strong",{children:u&&m?"".concat(u.format("DD/MM/YYYY")," - ").concat(m.format("DD/MM/YYYY")):""})}),(0,x.jsx)("button",{className:"cancelBtn btn btn-lg btn-light px-4 py-2",type:"button",onClick:function(){(0,e.onCancel)()},children:"Cancel"}),(0,x.jsx)("button",{className:"applyBtn btn btn-lg btn-primary px-4 py-2",type:"button",onClick:function(){var a=e.onDatesChange;a&&u&&m&&a({startDate:u,endDate:m})},children:"Apply"})]})]}))};function B(e){var a=e.className,t=e.style,n=e.children;return(0,x.jsx)("table",{style:t,className:a,children:n})}function T(e){var a=e.className,t=e.style,n=e.children;return(0,x.jsx)("tbody",{style:t,className:a,children:n})}function I(e){var a=e.className,t=e.style,n=e.children;return(0,x.jsx)("thead",{style:t,className:a,children:n})}function W(e){var a=e.className,t=e.onClick,n=e.style,r=e.children,s=e.colSpan,o=e.onMouseDown;return(0,x.jsx)("th",{style:n,onClick:t,colSpan:s,onMouseDown:o,className:a,children:r})}function E(e){var a=e.className,t=e.onClick,n=e.style,r=e.children;return(0,x.jsx)("tr",{style:n,onClick:t,className:a,children:r})}var R,L=t(4942);var U=(R={},(0,L.Z)(R,D,(function(e){var a=e.day,t=function(e){var a=e.day,t=e.calendar,n=e.startDate,r=e.endDate,s=e.range,o=e.maxDate,l=e.minDate,c=function(e){return e.day()>5||e.day()<1}(a),i=f(n,r,a)||f(n,s,a),u=r&&a.format("YYYY-MM-DD")===r.format("YYYY-MM-DD"),h=n&&a.format("YYYY-MM-DD")===n.format("YYYY-MM-DD"),m=h||u,D=t.month()!==a.month()||d(l,o,a),p=d(l,o,a),x=!p;return v()({weekend:c,"in-range":i,"end-date":u,"start-date":h,active:m,off:D,disabled:p,available:x})}((0,c.Z)({},e));return(0,x.jsx)("td",{className:t,onClick:function(){var a=e.onDayClick,t=e.day;a&&a(t)},children:a.format("DD")})})),(0,L.Z)(R,p,(function(e){var a=e.week;return(0,x.jsx)("td",{className:"week",children:a})})),R);function _(e){var a=(0,r.useCallback)((function(){for(var a=e.startDate,t=e.endDate,n=e.range,r=e.minDate,s=e.maxDate,o=e.showWeekNumbers,l=e.showISOWeekNumbers,i=e.calendar,u=e.onDayClick,d=e.onDayMouseEnter,f=i.startOf("month").startOf("week"),m=i.endOf("month").endOf("week"),v=[],y=f.clone();y<=m;)v.push(y),y=y.add(1,"day");if(v.length<42)for(var b=v.length;b<42;b++)v.push(y),y=y.add(1,"day");for(var k=[],Y=0;Y<6;Y++){var g=[],j=7*Y,w=v[j];if(l||o){var N=l?h(w.toDate()):w.week();g.push({unitType:p,key:0,week:N})}for(var Z=g.length,C=0;C<7;C++){var O=j+C,M=v[O],S={unitType:D,key:O+Z,minDate:r,maxDate:s,day:M,calendar:i,startDate:a,range:n,endDate:t,onDayMouseEnter:d,onDayClick:u};g.push(S)}k.push(g)}return k.map((function(e,a){var t=e.map((function(e){var a=U[e.unitType];return(0,x.jsx)(a,(0,c.Z)({},e))}));return(0,x.jsx)(E,{children:t},a)}))}));return(0,x.jsx)(T,{children:(0,x.jsx)(a,{})})}function F(e){var a=e.next,t=e.calendar,n=v()({next:a,available:a}),r=t?function(){!function(a){var t=e.handleNext;t&&t(a)}(t)}:function(){},s=a?(0,x.jsx)("span",{}):null,o={className:n,onClick:r};return(0,x.jsx)(W,(0,c.Z)((0,c.Z)({},o),{},{children:s}))}function A(e){var a=e.calendar,t=e.prev,n=v()({prev:t,available:t}),r=a?function(){!function(a){var t=e.handlePrev;t&&t(a)}(a)}:function(){},s=t?(0,x.jsx)("span",{}):null,o={className:n,onClick:r};return(0,x.jsx)(W,(0,c.Z)((0,c.Z)({},o),{},{children:s}))}function V(e){var a=e.calendar,t={colSpan:e.colSpan,className:e.className},n=a.format("MMM YYYY");return(0,x.jsx)(W,(0,c.Z)((0,c.Z)({},t),{},{children:n}))}function z(e){var a=function(e){return e.add(1,"month")},t=function(e){return e.subtract(1,"month")},n=e.showNext,s=e.calendar,o=e.handleNext,l=e.showPrev,i=e.handlePrev,u=(0,r.useCallback)((function(){return{next:n,calendar:a(s),handleNext:o}})),d=(0,r.useCallback)((function(){return{prev:l,calendar:t(s),handlePrev:i}})),f=(0,r.useCallback)((function(){var a=e.showISOWeekNumbers,t=e.showWeekNumbers;return{colSpan:a||t?6:5,calendar:s}})),h=(0,r.useCallback)((function(){var a=e.showWeekNumbers,t=e.showISOWeekNumbers,n=e.locale,r=n.weekNames,s=n.weekLabel,o=t||a,l=(o?[s].concat(r):r).map((function(e,a){var t={children:e,className:v()({week:!(0!==a||!o)}),key:a};return(0,x.jsx)(W,(0,c.Z)({},t))}));return(0,x.jsx)(E,{children:l})})),m=d(),D=u(),p=f();return(0,x.jsxs)(I,{children:[(0,x.jsxs)(E,{children:[(0,x.jsx)(A,(0,c.Z)({},m)),(0,x.jsx)(V,(0,c.Z)({},p)),(0,x.jsx)(F,(0,c.Z)({},D))]}),h()]})}function K(e){var a=e.dateRange.start,t=(0,r.useState)(l()(a)),s=(0,n.Z)(t,2),o=s[0],i=s[1],u=(0,r.useState)(l()(a).add(1,"month")),d=(0,n.Z)(u,2),f=d[0],h=d[1],m=function(e){i(e),h(e.add(1,"month"))},D=function(e){i(e.subtract(1,"month")),h(e)},p=(0,c.Z)((0,c.Z)({},e),{},{calendar:o}),y=(0,c.Z)((0,c.Z)({},e),{},{calendar:f}),b=(0,c.Z)({handlePrev:m,handleNext:function(){},handleSelected:m,showNext:!1,showPrev:!0},p),k=(0,c.Z)({showPrev:!1,showNext:!0,handlePrev:function(){},handleNext:D,handleSelected:D},y),Y=e.children,g=v()({"daterangepicker show-calendar row px-2 pt-2":!0});return(0,x.jsxs)("div",{className:g,style:{left:"auto",display:"flex"},children:[(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"calendar-table pr-2",children:(0,x.jsxs)(B,{className:"table-condensed",children:[(0,x.jsx)(z,(0,c.Z)({},b)),(0,x.jsx)(_,(0,c.Z)({},b))]})})},0),(0,x.jsx)("div",{children:(0,x.jsx)("div",{className:"calendar-table pl-2",children:(0,x.jsxs)(B,{className:"table-condensed",children:[(0,x.jsx)(z,(0,c.Z)({},k)),(0,x.jsx)(_,(0,c.Z)({},k))]})})},1),Y]})}var $=r.memo((function(e){var a=(0,c.Z)((0,c.Z)({},e),{},{component:K});return(0,x.jsx)(P,(0,c.Z)({},a))})),q=t(72525),G=[{name:"Today",value:{start:o().toDate(),end:o().toDate()}},{name:"Yesterday",value:{start:o().subtract(1,"days").toDate(),end:o().subtract(1,"days").toDate()}},{name:"Last 7 Days",value:{start:o().subtract(6,"days").toDate(),end:o().toDate()}},{name:"Last 30 Days",value:{start:o().subtract(29,"days").toDate(),end:o().toDate()}},{name:"This Month",value:{start:o().startOf("month").toDate(),end:o().endOf("month").toDate()}},{name:"Last Month",value:{start:o().subtract(1,"month").startOf("month").toDate(),end:o().subtract(1,"month").endOf("month").toDate()}}],H={appParamsValue:{}};var J=function(e){var a=e.tag,t=e.onSendNotification,l=(0,r.useState)(),c=(0,n.Z)(l,2),i=c[0],u=c[1],d=(0,r.useState)({start:(new Date).setDate(0),end:new Date}),f=(0,n.Z)(d,2),h=f[0],m=f[1],v=(0,r.useState)(!1),D=(0,n.Z)(v,2),p=D[0],y=D[1],b=h.start,k=h.end;(0,r.useEffect)((function(){var e=null!==a.configuration.startDateRange?new Date(a.configuration.startDateRange):o().startOf("month").toDate(),t=null!==a.configuration.endDateRange?new Date(a.configuration.endDateRange):o().endOf("month").toDate();m({start:e,end:t}),Y(),q.O.getNotification().subscribe((function(e){Y(),H=e}))}),[]);var Y=function(){var e,t,n=(null===a||void 0===a?void 0:a.configuration).appParam;if(2==(null===n||void 0===n?void 0:n.length)&&q.B.hasOwnProperty(null===(e=n[0])||void 0===e?void 0:e.value)&&q.B.hasOwnProperty(null===(t=n[1])||void 0===t?void 0:t.value)){var r=Date.parse(q.B[n[0].value].split("-").reverse().join("/")),s=Date.parse(q.B[n[1].value].split("-").reverse().join("/"));h.start=r,h.end=s,m({start:r,end:s})}},g=function(e,a,n,r){var s,l;e.appParamsValue[(null===r||void 0===r||null===(s=r.configuration)||void 0===s?void 0:s.appParam)&&r.configuration.appParam[0]&&r.configuration.appParam[0].value]=o(a).format("DD-MM-YYYY"),e.appParamsValue[(null===r||void 0===r||null===(l=r.configuration)||void 0===l?void 0:l.appParam)&&r.configuration.appParam[1]&&r.configuration.appParam[1].value]=o(n).format("DD-MM-YYYY"),q.O.sendNotification(e),t(e)},j=(0,r.useCallback)((function(e){var t=e.startDate,n=e.endDate;m({start:new Date(t).toISOString(),end:new Date(n).toISOString()}),w(),g(H,t,n,a)})),w=function(){y((function(e){return!e}))},N=o(b).format("MMM DD YYYY"),Z=o(k).format("MMM DD YYYY");return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(s.OB,{children:[(0,x.jsxs)(s.Z_,{caret:!0,tag:"span",size:"xs",children:[(0,x.jsx)("i",{className:"simple-icon-calendar mr-2 "}),N===Z?N:(0,x.jsxs)(x.Fragment,{children:[N,(0,x.jsx)("i",{className:"iconsminds-right ml-1 mr-1"}),Z]})]}),(0,x.jsxs)(s.h_,{children:[G.map((function(e){return(0,x.jsx)(s.hP,{onClick:function(){!function(e){var t=e.value,n=e.name,r=t.start,s=t.end;u(n),m({start:new Date(r).toISOString(),end:new Date(s).toISOString()}),g(H,r,s,a)}(e)},active:e.name===i,children:e.name},e.name)})),(0,x.jsx)(s.hP,{onClick:function(){w(),u("custom-range")},active:"custom-range"===i,children:"Custom Range"},"custom-range"),(0,x.jsx)(s.u_,{isOpen:p,children:(0,x.jsx)($,{dateRange:h,onDatesChange:j,onCancel:w})})]})]})})}},39216:function(e){e.exports=function(){"use strict";var e="week",a="year";return function(t,n,r){var s=n.prototype;s.week=function(t){if(void 0===t&&(t=null),null!==t)return this.add(7*(t-this.week()),"day");var n=this.$locale().yearStart||1;if(11===this.month()&&this.date()>25){var s=r(this).startOf(a).add(1,a).date(n),o=r(this).endOf(e);if(s.isBefore(o))return 1}var l=r(this).startOf(a).date(n).startOf(e).subtract(1,"millisecond"),c=this.diff(l,e,!0);return c<0?r(this).startOf("week").week():Math.ceil(c)},s.weeks=function(e){return void 0===e&&(e=null),this.week(e)}}}()}}]);
//# sourceMappingURL=DatePicker.0e46b283.chunk.js.map